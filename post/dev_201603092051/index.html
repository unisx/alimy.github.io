  <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <title> XStream: Referencing Objects &middot; Alimy </title>
    
    <link rel="stylesheet" type="text/css" href="http://alimy.me/css/uno.min.css" />
    <link rel="stylesheet" type="text/css" href="http://alimy.me/css/lightGallery.css" />
    
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://alimy.me/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="http://alimy.me/favicon.png">
    
    <link href="" rel="alternate" type="application/rss+xml" title="Alimy" />
    
    <script src="http://alimy.me/js/jquery.min.js"></script>
    <script src="http://alimy.me/js/main.min.js"></script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-75081327-1', 'auto');
  ga('send', 'pageview');

</script>
    <style type="text/css">
        body {
          background-color:#f9f9f9;
        }
        .panel-wrapper {
          box-shadow:0px 0px 8px rgba(68,68,68,.6);
          -moz-box-shadow:0px 0px 8px rgba(68,68,68,.6);
          border-radius:4px;
          -moz-border-radius:4px;
          padding:16px 24px;
          margin-top:32px;
          background-color:#fff
        }
        .panel-wrapper:hover {
          box-shadow:0px 0px 12px rgba(68,68,68,.6);
          -moz-box-shadow:0px 0px 12px rgba(68,68,68,.6);
        }
        #more {
          margin-top:16px;
        }
        #copyright {
          padding:2em 0 0;
          display:block;
          font-size:.9em;
          color:#b3b3b3;
          width:100%;
          text-align:center
        }
        #list-indicator {
          min-width:48px;
          text-align:center;
          float:right;
          margin-right:64px;
          background:rgba(68,68,68,.2);
          border-radius:4px;
          -moz-border-radius:4px;
          padding:8px;
        }
        #list-date {
          color:#999;
          font-size: .9em;
          font-style:italic;
        }
        #post-navigator {
          padding:24px 0px 16px 0px;
          vertical-align: middle;
        }
        #post-navigator>a {
          display: block;
          color:#2479cc;
          text-decoration:none;
        }
        #post-navigator-prev {
          float:left;
        }
        #post-navigator-next {
          float:right;
        }
    </style>
</head>

  <body>
    <div id="scriptHeader">
    <span class="mobile btn-mobile-menu">
            <i class="fa fa-bars btn-mobile-menu__icon"></i>
            <i class="fa fa-times btn-mobile-close__icon hidden"> </i>
    </span>
    <header class="
        
            panel-cover panel-cover--collapsed
        " >
    <div class="panel-main">
        <div class="panel-main__inner panel-inverted">
            <div class="panel-main__content"> 
                <a href="http://alimy.me/"> <img src="http://alimy.me/images/logo.jpg" width="80" alt="Alimy logo" class="panel-cover__logo logo" /> </a> 
                <h1 class="panel-cover__title panel-title">
                    <a href="http://alimy.me/">Alimy</a>
                </h1>
                <hr class="panel-cover__divider" />
                <p class="panel-cover__description">  乱花渐欲迷人眼，浅草才能没马蹄。  </p>
                <hr class="panel-cover__divider panel-cover__divider--secondary" />
                <div class="navigation-wrapper">
                    <nav class="cover-navigation cover-navigation--primary">
                        <ul class="navigation">
                            <li class="navigation__item"><a href="http://alimy.me#blog" title="博客首页" class="blog-button">Blog</a> </li>
                            </br>  </ul>
                    </nav> <nav class="cover-navigation navigation--social">
    <ul class="navigation"> 
        
        <li class="navigation__item">
            <a href="http://twitter.com/alimy86" title="@Twitter"> <i class='fa fa-twitter'></i> <span class="label">Twitter</span> </a>
        </li>   
        
        <li class="navigation__item">
            <a href="https://github.com/alimy" title="@GitHub"> <i class='fa fa-github'></i> <span class="label">Github</span> </a>
        </li>  </br>    </ul>
</nav>
 </div>
            </div>
        </div>
        <div class="panel-cover--overlay"></div>
    </div>
</header>
</div>
<noscript>
    <style>
        #scriptHeader {display:none;}
        .navigation-wrapper{
            display: block;
            top: 0;
        }
    </style>

    <header class="panel-cover panel-cover--collapsed" style="background-image: url()">
        <div class="panel-main">
            <div class="panel-main__inner panel-inverted">
                <div class="panel-main__content"> 
                    <a href="http://alimy.me/"> <img src="http://alimy.me/images/logo.jpg" width="80" alt="Alimy logo" class="panel-cover__logo logo" /> </a> 
                    <h1 class="panel-cover__title panel-title">
                        <a href="http://alimy.me/">Alimy</a>
                    </h1>
                    <hr class="panel-cover__divider" />
                    <p class="panel-cover__description">  乱花渐欲迷人眼，浅草才能没马蹄。  </p>
                    <hr class="panel-cover__divider panel-cover__divider--secondary" />
                    <div class="navigation-wrapper">
                        <nav class="cover-navigation cover-navigation--primary">
                            <ul class="navigation">
                                <li class="navigation__item"><a href="http://alimy.me/#blog" title="博客首页" class="blog-button">Blog</a> </li>
                                </br>  </ul>
                        </nav> <nav class="cover-navigation navigation--social">
    <ul class="navigation"> 
        
        <li class="navigation__item">
            <a href="http://twitter.com/alimy86" title="@Twitter"> <i class='fa fa-twitter'></i> <span class="label">Twitter</span> </a>
        </li>   
        
        <li class="navigation__item">
            <a href="https://github.com/alimy" title="@GitHub"> <i class='fa fa-github'></i> <span class="label">Github</span> </a>
        </li>  </br>    </ul>
</nav>
 </div>
                </div>
            </div>
            <div class="panel-cover--overlay"></div>
        </div>
    </header>
</noscript>

    <div class="content-wrapper">
      <div class="content-wrapper__inner">
        <div class="post panel-wrapper">
            <h2>XStream: Referencing Objects</h2>
          
          <p>XStream allows you to store references while converting a java object to XML. Consider a case where you have an Artist Object. The object contains albums that the artist has released, but you also want to store a reference to a &lsquo;similar artist&rsquo;. People listening to an artist might be interested in listening to a similar artist. When you convert this object to XML, XStream preserves the reference to the similar artist. It also manages circular references, so if there are no similar artist then the &lsquo;similar artist&rsquo; field could store a reference to the Owner Artist.</p>

<p>XStream has multiple ways to store references. you need to use the setMode(int mode) method to set the mode. XStream allows following modes:</p>

<ul>
<li>NO_REFERENCES</li>
<li>ID_REFERENCES</li>
<li>XPATH_RELATIVE_REFERENCES</li>
<li>XPATH_ABSOLUTE_REFERENCES</li>
<li>SINGLE_NODE_XPATH_RELATIVE_REFERENCES</li>
<li>SINGLE_NODE_XPATH_ABSOLUTE_REFERENCES</li>
</ul>

<p>In the example below we see how each of the above looks We first create the XStream object instance, the Artist Class and the Album class. We also add appropriate aliases to make the XML more readable.</p>

<pre><code>package com.studytrails.xml.xstream;

import com.thoughtworks.xstream.XStream;

public class ReferencingObjectsExample {

    public static void main(String[] args) {
        Artist artist = new Artist();
        AnotherAlbum album = new AnotherAlbum();
        artist.setAlbum(album);
        XStream xStream = new XStream();
        xStream.alias(&quot;artist&quot;, Artist.class);
        xStream.alias(&quot;anotherAlbum&quot;, AnotherAlbum.class);
</code></pre>

<p>Here are the classes. An Artist contains an album. It also contains object of type &lsquo;Top10Album&rsquo; which is a child of the class &lsquo;Album&rsquo; and contains the top10 songs of the Artist. We also store a reference to another artist which is similar to this artist. The aim is to see how the reference to the various objects are stored in the XML. The reference to Top10Album is a reference to a derived class. The reference to Artist is a reference to the Object&rsquo;s own type.</p>

<pre><code>class Artist {
    Top10Album album;
    Album album2;
    Artist similarArtist;

    public void setSimilarArtist(Artist similarArtist) {
        this.similarArtist = similarArtist;
    }

    public void setAlbum(Top10Album album) {
        this.album = album;
        album2 = (Top10Album) this.album;
    }
}

class Album {
}

class Top10Album extends Album {
}
</code></pre>

<p>case 1: ID_REFERENCES</p>

<pre><code>xStream.setMode(XStream.ID_REFERENCES);
</code></pre>

<p>The output XML</p>

<pre><code>&lt;artist id=&quot;1&quot;&gt;
  &lt;album id=&quot;2&quot;&gt;
    &lt;album2 class=&quot;anotherAlbum&quot; reference=&quot;2&quot;&gt;
    &lt;/album2&gt;
  &lt;/album&gt;
&lt;/artist&gt;
</code></pre>

<p>case 2: NO_REFERENCES</p>

<pre><code>xStream.setMode(XStream.NO_REFERENCES);
</code></pre>

<p>The output XML</p>

<pre><code>&lt;artist&gt;
  &lt;album&gt;
  &lt;album2 class=&quot;anotherAlbum&quot;&gt;
&lt;/album2&gt;&lt;/album&gt;&lt;/artist&gt;
</code></pre>

<p>case 3: SINGLE_NODE_XPATH_ABSOLUTE_REFERENCES</p>

<pre><code>xStream.setMode(XStream.SINGLE_NODE_XPATH_ABSOLUTE_REFERENCES);
</code></pre>

<p>The output XML</p>

<pre><code>&lt;artist&gt;
  &lt;album&gt;
  &lt;album2 class=&quot;anotherAlbum&quot; reference=&quot;/artist[1]/album[1]&quot;&gt;
&lt;/album2&gt;&lt;/album&gt;&lt;/artist&gt;
</code></pre>

<p>case 4: SINGLE_NODE_XPATH_RELATIVE_REFERENCES</p>

<pre><code>xStream.setMode(XStream.SINGLE_NODE_XPATH_RELATIVE_REFERENCES);
</code></pre>

<p>The output XML</p>

<pre><code>&lt;artist&gt;
  &lt;album&gt;
  &lt;album2 class=&quot;anotherAlbum&quot; reference=&quot;../album[1]&quot;&gt;
&lt;/album2&gt;&lt;/album&gt;&lt;/artist&gt;
</code></pre>

<p>case 5: XPATH_ABSOLUTE_REFERENCES</p>

<pre><code>xStream.setMode(XStream.XPATH_ABSOLUTE_REFERENCES);
</code></pre>

<p>The output XML</p>

<pre><code>&lt;artist&gt;
  &lt;album&gt;
  &lt;album2 class=&quot;anotherAlbum&quot; reference=&quot;/artist/album&quot;&gt;
&lt;/album2&gt;&lt;/album&gt;&lt;/artist&gt;
</code></pre>

<p>case 6: XPATH_RELATIVE_REFERENCES</p>

<pre><code>xStream.setMode(XStream.XPATH_RELATIVE_REFERENCES);
</code></pre>

<p>The output XML</p>

<pre><code>&lt;artist&gt;
  &lt;album&gt;
  &lt;album2 class=&quot;anotherAlbum&quot; reference=&quot;../album&quot;&gt;
&lt;/album2&gt;&lt;/album&gt;&lt;/artist&gt;
</code></pre>

<hr />

<p>(Note: This article’s original links is <a href="http://www.studytrails.com/java/xml/xstream/xstream-java-to-xml-referencing-Objects.jsp" title="Referencing Objects"><em>here</em></a> )</p>

        </div>
        <div id="post-navigator">
          <a id="post-navigator-prev" href="http://alimy.me/post/dev_201603092041/" title="上一篇">&lt;&lt; XStream: Handling Attributes in XML</a>
          <a id="post-navigator-next" href="http://alimy.me/post/dev_201603092055/" title="下一篇">XStream: Custom Converter for BufferedImage >></a>
        </div>
        <div id="post-comments">
          <h3>Comments</h3>
          


<div id="disqus_thread"></div>

<script type="text/javascript">
  var disqusUsername = "alimy";

  (function() { 
  var d = document, s = d.createElement('script');

  s.src = '//' + disqusUsername + '.disqus.com/embed.js';

  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


        </div>
    </div>
  </body>
  <script>(function(){var WebP=new Image();WebP.onload=WebP.onerror=function(){
if(WebP.height!=2){var sc=document.createElement('script');sc.type='text/javascript';sc.async=true;
var s=document.getElementsByTagName('script')[0];sc.src='/js/webpjs-0.0.2.min.js';s.parentNode.insertBefore(sc,s);}};
WebP.src='data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';})();</script>

</html>
